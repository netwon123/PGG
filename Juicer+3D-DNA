#bwa index references/LDR.fasta
#python /public/home/baoqi/LDR/juicer/misc/generate_site_positions.py MboI assembly references/LDR.fasta
#awk 'BEGIN{OFS="\t"}{print $1, $NF}' assembly_MboI.txt > genome.chrom.sites
#mv assembly_MboI.txt restriction_sites
#mv genome.chrom.sites restriction_sites

/public/home/baoqi/LDR/juicer/scripts/juicer.sh -t 56 -g RT -z references/LDR.fasta -y restriction_sites/assembly_MboI.txt -p restriction_sites/genome.chrom.sizes -D /public/home/baoqi/LDR/juicer -s MboI -d /public/home/baoqi/LDR/juicer/work

#---3d-dna
/public/home/baoqi/software/3d-dna/run-asm-pipeline.sh /public/home/baoqi/LDR/juicer/references/LDR.fasta /public/home/baoqi/LDR/juicer/work/aligned/merged_nodups.txt


#common error- no space
need to change the memory parameter in /software/3d-dna/visualize/juicebox_tools.sh
'''
#!/bin/sh
set -e
java -Xms512G -Xmx512G -jar `dirname $0`/juicebox_tools.jar $*
                                                        '''
                                                        
#https://github.com/aidenlab/3d-dna/issues/110
awk -f /public/home/baoqi/software/3d-dna/utils/wrap-fasta-sequence.awk ./purged.fa > wrapped.fasta #speed the progress
/public/home/baoqi/software/3d-dna/run-asm-pipeline-post-review.sh --sort-output  -r purged.0.review.assembly wrapped.fasta ~/LDR/purge_ldr/juicer/work/aligned/merged_nodups.txt
